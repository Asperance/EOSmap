<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>EOS Map</title>

  <!-- Leaflet -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <!-- Leaflet-Geoman -->
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet-geoman@2.16.0/dist/leaflet-geoman.css">

  <style>
    html,body,#map{height:100%;margin:0}
  </style>
</head>
<body>
<div id="map"></div>

<!-- libs -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-geoman@2.16.0/dist/leaflet-geoman.min.js"></script>

<script>
  /* путь к картинке */
  const imgSrc = 'img/map.png';

  /* реальные размеры вашего PNG! */
  const IMAGE_WIDTH  = 2874;   // <-- поставьте свою ширину
  const IMAGE_HEIGHT = 6250;   // <-- и высоту

  const bounds = [[0,0],[IMAGE_HEIGHT,IMAGE_WIDTH]]; // [y,x] CRS.Simple

  /* создаём карту */
  const map = L.map('map', {
    crs: L.CRS.Simple,
    minZoom: -5,
    maxZoom: 2,
    zoomSnap: 0.5
  });

  L.imageOverlay(imgSrc, bounds).addTo(map);
  map.fitBounds(bounds);
  map.setMaxBounds(bounds);

  /* включаем панель Geoman */
  map.pm.addControls({           // можно просто map.pm.addControls()
    position: 'topleft',         // где показывать
    drawMarker: true,
    drawCircle: true,
    drawPolygon: true,
    editMode: true,
    removalMode: true
  });

  /* выводим GeoJSON всех нарисованных объектов */
  const dump = () => {
    const gj = L.PM.Utils.findLayers(map).toGeoJSON();
    console.log('GeoJSON:', JSON.stringify(gj, null, 2));
  };
  map.on('pm:create pm:edit pm:remove', dump);
</script>
</body>
</html>
